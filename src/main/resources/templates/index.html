<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<!-- 헤더 Include -->
<div th:replace="~{common/header}"></div>

<!-- 히어로 섹션 -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h2>전통시장에서 만나는 특별한 쇼핑</h2>
            <p>전국 전통시장의 신선한 상품과 정겨운 인심을 온라인에서 만나보세요</p>
            <a th:href="@{/markets}" class="btn-primary">전통시장 둘러보기</a>
        </div>
    </div>
</section>

<!-- 통계 섹션 -->
<section class="stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number" th:text="${stats.marketCount ?: '35'}">35</span>
                <span class="stat-label">등록된 전통시장</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" th:text="${stats.storeCount ?: '156'}">156</span>
                <span class="stat-label">참여 가게</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" th:text="${stats.productCount ?: '1,240'}">1,240</span>
                <span class="stat-label">판매 상품</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" th:text="${stats.memberCount ?: '8,950'}">8,950</span>
                <span class="stat-label">회원 수</span>
            </div>
        </div>
    </div>
</section>

<!-- 인기 전통시장 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">인기 전통시장</h2>
            <p class="section-subtitle">전국에서 가장 사랑받는 전통시장을 만나보세요</p>
        </div>
        
        <div class="card-grid">
            <div th:each="market : ${popularMarkets}" class="card" 
                 th:onclick="'location.href=\'/markets/' + ${market.marketId} + '\''">
                <div class="card-image" 
                     th:style="'background-image: url(/images/markets/' + ${market.marketFilename ?: 'default-market.jpg'} + ')'">
                    <div class="card-badge">HOT</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title" th:text="${market.marketName}">남대문시장</h3>
                    <p class="card-description" th:text="${market.marketIntroduce ?: '전통과 현대가 어우러진 대표 전통시장'}">
                        전통과 현대가 어우러진 대표 전통시장
                    </p>
                    <div class="card-meta">
                        <span class="card-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span th:text="${market.marketLocal}">서울특별시</span>
                        </span>
                        <span class="favorite-count" th:if="${market.favoriteCount != null}">
                            <i class="fas fa-heart"></i>
                            <span th:text="${market.favoriteCount}">24</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/markets}" class="btn-secondary">더 많은 전통시장 보기</a>
        </div>
    </div>
</section>

<!-- 신상품 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">신선한 상품</h2>
            <p class="section-subtitle">전통시장에서 직접 공급하는 신선하고 품질 좋은 상품들</p>
        </div>
        
        <div class="product-grid">
            <div th:each="product : ${newProducts}" class="product-card">
                <div class="product-image" 
                     th:style="'background-image: url(/images/products/' + ${product.productFilename ?: 'default-product.jpg'} + ')'">
                    <button class="favorite-btn" 
                            th:onclick="'toggleFavorite(\'PRODUCT\', ' + ${product.productId} + ', this)'"
                            th:classappend="${product.isFavorite} ? 'active' : ''">
                        <i th:class="${product.isFavorite} ? 'fas fa-heart' : 'far fa-heart'"></i>
                    </button>
                </div>
                <div class="product-info">
                    <h4 class="product-name" th:text="${product.productName}">한우 등심</h4>
                    <div class="product-price" th:text="${#numbers.formatInteger(product.productPrice, 0, 'COMMA') + '원'}">45,000원</div>
                    <div class="product-store" th:text="${product.storeName}">김씨 한우전문점</div>
                    <button class="add-to-cart" 
                            th:onclick="'addToCart(' + ${product.productId} + ')'">
                        장바구니 담기
                    </button>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/products}" class="btn-secondary">더 많은 상품 보기</a>
        </div>
    </div>
</section>

<!-- 인기 가게 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">인기 가게</h2>
            <p class="section-subtitle">고객들이 선택한 믿을 수 있는 가게들</p>
        </div>
        
        <div class="card-grid">
            <div th:each="store : ${popularStores}" class="card" 
                 th:onclick="'location.href=\'/stores/' + ${store.storeId} + '\''">
                <div class="card-image" 
                     th:style="'background-image: url(/images/stores/' + ${store.storeFilename ?: 'default-store.jpg'} + ')'">
                    <div class="card-badge" th:text="${store.storeCategory}">정육점</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title" th:text="${store.storeName}">김씨 한우전문점</h3>
                    <p class="card-description" th:text="${store.storeIntroduce ?: '신선한 재료로 승부하는 가게'}">
                        신선한 재료로 승부하는 가게
                    </p>
                    <div class="card-meta">
                        <span class="card-location">
                            <i class="fas fa-store"></i>
                            <span th:text="${store.marketName}">남대문시장</span>
                        </span>
                        <span class="favorite-count" th:if="${store.favoriteCount != null}">
                            <i class="fas fa-heart"></i>
                            <span th:text="${store.favoriteCount}">12</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/stores}" class="btn-secondary">더 많은 가게 보기</a>
        </div>
    </div>
</section>

<!-- 최신 게시글 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">커뮤니티</h2>
            <p class="section-subtitle">전통시장 이용후기와 생생한 정보를 공유해보세요</p>
        </div>
        
        <div class="card-grid">
            <div th:each="board : ${recentBoards}" class="card" 
                 th:onclick="'location.href=\'/boards/' + ${board.boardId} + '\''">
                <div class="card-content">
                    <h3 class="card-title" th:text="${board.boardTitle}">남대문시장 후기</h3>
                    <p class="card-description" th:text="${#strings.abbreviate(board.boardContent, 100)}">
                        정말 좋은 시장이에요. 신선한 재료도 많고 가격도 합리적입니다...
                    </p>
                    <div class="card-meta">
                        <span class="card-location">
                            <i class="fas fa-user"></i>
                            <span th:text="${board.memberName}">김고객</span>
                        </span>
                        <span class="post-stats">
                            <i class="fas fa-eye"></i> <span th:text="${board.hitCnt}">45</span>
                            <i class="fas fa-heart" style="margin-left: 10px;"></i> <span th:text="${board.likeCnt}">8</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/boards}" class="btn-secondary">커뮤니티 더 보기</a>
        </div>
    </div>
</section>

<!-- 이벤트/공지사항 섹션 -->
<section class="section" style="background-color: white; padding: 60px 0; margin-top: 0;">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">공지사항 & 이벤트</h2>
            <p class="section-subtitle">LocalMarket의 새로운 소식을 확인하세요</p>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
            <!-- 공지사항 -->
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px;">
                <h3 style="color: #2c3e50; margin-bottom: 20px; display: flex; align-items: center;">
                    <i class="fas fa-bullhorn" style="margin-right: 10px; color: #3498db;"></i>
                    공지사항
                </h3>
                <ul style="list-style: none;">
                    <li style="padding: 10px 0; border-bottom: 1px solid #dee2e6;">
                        <a href="/notices/1" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>추석 연휴 배송 안내</span>
                            <span style="color: #7f8c8d; font-size: 0.9rem;">2025.09.25</span>
                        </a>
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid #dee2e6;">
                        <a href="/notices/2" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>개인정보처리방침 개정 안내</span>
                            <span style="color: #7f8c8d; font-size: 0.9rem;">2025.09.20</span>
                        </a>
                    </li>
                    <li style="padding: 10px 0;">
                        <a href="/notices/3" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>신규 전통시장 입점 안내</span>
                            <span style="color: #7f8c8d; font-size: 0.9rem;">2025.09.15</span>
                        </a>
                    </li>
                </ul>
                <div style="text-align: right; margin-top: 15px;">
                    <a href="/notices" style="color: #3498db; text-decoration: none; font-size: 0.9rem;">더보기 →</a>
                </div>
            </div>
            
            <!-- 이벤트 -->
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px;">
                <h3 style="color: #2c3e50; margin-bottom: 20px; display: flex; align-items: center;">
                    <i class="fas fa-gift" style="margin-right: 10px; color: #e74c3c;"></i>
                    이벤트
                </h3>
                <ul style="list-style: none;">
                    <li style="padding: 10px 0; border-bottom: 1px solid #dee2e6;">
                        <a href="/events/1" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>🎉 신규회원 첫 구매 20% 할인</span>
                            <span style="color: #e74c3c; font-size: 0.9rem;">진행중</span>
                        </a>
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid #dee2e6;">
                        <a href="/events/2" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>🏪 전통시장 투어 이벤트</span>
                            <span style="color: #e74c3c; font-size: 0.9rem;">진행중</span>
                        </a>
                    </li>
                    <li style="padding: 10px 0;">
                        <a href="/events/3" style="color: #2c3e50; text-decoration: none; display: flex; justify-content: space-between;">
                            <span>📝 리뷰 작성하고 적립금 받기</span>
                            <span style="color: #e74c3c; font-size: 0.9rem;">진행중</span>
                        </a>
                    </li>
                </ul>
                <div style="text-align: right; margin-top: 15px;">
                    <a href="/events" style="color: #3498db; text-decoration: none; font-size: 0.9rem;">더보기 →</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 푸터 Include -->
<div th:replace="~{common/footer}"></div>

<script>
    // 페이지별 추가 JavaScript
    $(document).ready(function() {
        // 히어로 섹션 애니메이션
        $('.hero-content').css({
            'opacity': '0',
            'transform': 'translateY(30px)'
        }).animate({
            'opacity': '1'
        }, 1000).animate({
            'transform': 'translateY(0)'
        }, 800);
        
        // 통계 카운터 애니메이션
        $('.stat-number').each(function() {
            const $this = $(this);
            const countTo = parseInt($this.text().replace(/,/g, ''));
            
            $({ countNum: 0 }).animate({
                countNum: countTo
            }, {
                duration: 2000,
                easing: 'swing',
                step: function() {
                    $this.text(Math.floor(this.countNum).toLocaleString());
                },
                complete: function() {
                    $this.text(countTo.toLocaleString());
                }
            });
        });
        
        // 카드 호버 효과
        $('.card').hover(
            function() {
                $(this).css('transform', 'translateY(-10px)');
            },
            function() {
                $(this).css('transform', 'translateY(0)');
            }
        );
    });
</script>

</html>
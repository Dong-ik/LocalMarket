<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" th:href="@{/css/index.css}">
</head>
<body> 
<!-- 헤더 Include -->
<div th:replace="~{common/header}"></div>
 
<!-- 히어로 섹션 -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h2>전통시장에서 만나는 특별한 쇼핑</h2>
            <p>전국 전통시장의 신선한 상품과 정겨운 인심을 온라인에서 만나보세요</p>
            <a th:href="@{/markets}" class="btn-primary">전통시장 둘러보기</a>
        </div>
    </div>
</section>

<!-- 인기 전통시장 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">인기 전통시장</h2>
            <p class="section-subtitle">전국에서 가장 사랑받는 전통시장을 만나보세요</p>
        </div>
        
        <div class="card-grid">
            <div th:each="market : ${popularMarkets}" class="card" 
                 th:onclick="'location.href=\'/markets/' + ${market.marketId} + '\''">
                <div class="card-image" 
                     th:style="${market.marketFilename != null ? 'background-image: url(/images/markets/' + market.marketFilename + ')' : ''}">
                    
                    <!-- 이미지 없음 표시 -->
                    <div th:if="${market.marketFilename == null}" class="no-image-text">
                        <i class="fas fa-image"></i>
                        <p>이미지 없음</p>
                    </div>
                    
                    <div class="card-badge">HOT</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title" th:text="${market.marketName}"></h3>
                    <p class="card-description" th:text="${market.marketIntroduce ?: '전통과 현대가 어우러진 대표 전통시장'}"></p>
                    <div class="card-meta">
                        <span class="card-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span th:text="${market.marketLocal}"></span>
                        </span>
                        <span class="favorite-count" th:if="${market.favoriteCount != null}">
                            <i class="fas fa-heart"></i>
                            <span th:text="${market.favoriteCount}"></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/markets}" class="btn-secondary">더 많은 전통시장 보기</a>
        </div>
    </div>
</section>

<!-- 인기 가게 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">인기 가게</h2>
            <p class="section-subtitle">고객들이 선택한 믿을 수 있는 가게들</p>
        </div>
        
        <div class="card-grid">
            <div th:each="store : ${popularStores}" class="card" 
                 th:onclick="'location.href=\'/stores/' + ${store.storeId} + '\''">
                <div class="card-image" 
                     th:style="${store.storeFilename != null ? 'background-image: url(/images/stores/' + store.storeFilename + ')' : ''}">
                    
                    <!-- 이미지 없음 표시 -->
                    <div th:if="${store.storeFilename == null}" class="no-image-text">
                        <i class="fas fa-image"></i>
                        <p>이미지 없음</p>
                    </div>
                    
                    <div class="card-badge" th:text="${store.storeCategory}"></div>
                </div>
                <div class="card-content">
                    <h3 class="card-title" th:text="${store.storeName}"></h3>
                    <p class="card-description" th:text="${store.storeCategory + ' - ' + (store.marketName ?: '전통시장')}"></p>
                    <div class="card-meta">
                        <span class="card-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span th:text="${store.marketLocal ?: '전통시장'}"></span>
                        </span>
                        <span class="card-location">
                            <i class="fas fa-store"></i>
                            <span th:text="${store.storeCategory}"></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/stores}" class="btn-secondary">더 많은 가게 보기</a>
        </div>
    </div>
</section>

<!-- 신상품 섹션 -->
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">신선한 상품</h2>
            <p class="section-subtitle">전통시장에서 직접 공급하는 신선하고 품질 좋은 상품들</p>
        </div>
        
        <div class="product-grid">
            <div th:each="product : ${newProducts}" class="product-card">
                <div class="product-image" 
                     th:style="${product.productFilename != null ? 'background-image: url(/images/products/' + product.productFilename + ')' : ''}">
                    
                    <!-- 이미지 없음 표시 -->
                    <div th:if="${product.productFilename == null}" class="no-image-text">
                        <i class="fas fa-image"></i>
                        <p>이미지 없음</p>
                    </div>
                </div>
                <div class="product-info">
                    <h4 class="product-name" th:text="${product.productName}"></h4>
                    <div class="product-price" th:text="${#numbers.formatInteger(product.productPrice, 0, 'COMMA') + '원'}"></div>
                    <div class="product-store" th:if="${product.productAmount != null}">
                        재고: <span th:text="${product.productAmount + '개'}"></span>
                    </div>
                    <button class="add-to-cart" 
                            th:onclick="'location.href=\'/products/' + ${product.productId} + '\''">
                        상세보기
                    </button>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-40">
            <a th:href="@{/products}" class="btn-secondary">더 많은 상품 보기</a>
        </div>
    </div>
</section>

<!-- 공지사항/게시판 섹션 -->
<section class="section news-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">공지사항 & 게시판</h2>
            <p class="section-subtitle">LocalMarket의 새로운 소식을 확인하세요</p>
        </div>

        <div class="news-grid">
            <!-- 공지사항 -->
            <div class="news-box">
                <h3>
                    <i class="fas fa-bullhorn"></i>
                    공지사항
                </h3>
                <ul>
                    <li th:each="notice : ${recentNotices}">
                        <a th:href="@{/notices/{id}(id=${notice.noticeId})}">
                            <span th:text="${notice.noticeTitle}"></span>
                            <span th:text="${#temporals.format(notice.writeDate, 'MM-dd')}"></span>
                        </a>
                    </li>
                </ul>
                <div class="more-link">
                    <a href="/notices">더보기 →</a>
                </div>
            </div>

            <!-- 최신 게시글 -->
            <div class="news-box">
                <h3>
                    <i class="fas fa-comments"></i>
                    최신 게시글
                </h3>
                <ul>
                    <li th:each="board : ${recentBoards}">
                        <a th:href="@{/boards/{id}(id=${board.boardId})}">
                            <span th:text="${board.boardTitle}"></span>
                            <span th:text="${#temporals.format(board.writeDate, 'MM-dd')}"></span>
                        </a>
                    </li>
                </ul>
                <div class="more-link">
                    <a href="/boards">더보기 →</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 푸터 Include -->
<div th:replace="~{common/footer}"></div>

<script>
    // 페이지별 추가 JavaScript
    $(document).ready(function() {
        // 히어로 섹션 애니메이션
        $('.hero-content').css({
            'opacity': '0',
            'transform': 'translateY(30px)'
        }).animate({
            'opacity': '1'
        }, 1000).animate({
            'transform': 'translateY(0)'
        }, 800);
        
        // 카드 호버 효과
        $('.card').hover(
            function() {
                $(this).css('transform', 'translateY(-10px)');
            },
            function() {
                $(this).css('transform', 'translateY(0)');
            }
        );
    });
</script>

</html>